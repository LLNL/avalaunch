#!/bin/bash

set -x

num=420
hosts=`glob-hosts -s $num -e -a -h 'apex[587-719,726-859,861-863,870-961,1080-1147,1264]'`
#echo $hosts
#exit 0

#export MV2_SPAWN_SH=ssh # rsh/ssh - remote shell command (rsh is default)

export MV2_SPAWN_DEGREE=64  # degree of k-ary tree
export MV2_SPAWN_PPN=1      # number of app procs per node

export MV2_SPAWN_EXE=src/new/examples/pmi_test
export MV2_SPAWN_PMI=1   # whether to enable PMI

#export MV2_SPAWN_EXE=src/new/examples/ring_test
#export MV2_SPAWN_RING=1  # whether to enable ring

#export MV2_SPAWN_LOCAL=sh # sh/direct - how to exec local procs (direct is default)
#export MV2_SPAWN_COPY=1   # whether to rcp launcher proc to /tmp during unfurl
export MV2_SPAWN_NET=ibud  # tcp/ibud - network transport (tcp is default)
#export MV2_SPAWN_FIFO=1   # whether to use FIFO vs TCP for PMI (off by default)

src/new/launcher $hosts
